{% extends "layout.html" %}
{% block content %}
<h1>Your Cart</h1>
{% if not items %}
  <p>Your cart is empty.</p>
{% else %}
<table>
  <tr><th>Product</th><th>Price</th><th>Qty</th><th>Line</th><th></th></tr>
  {% for it in items %}
  <tr>
    <td>{{ it.name }}</td>
    <td>ETB {{ "%.2f"|format(it.price) }}</td>
    <td>
      <form method="post" action="{{ url_for('cart_update') }}">
        <input type="hidden" name="product_id" value="{{ it.id }}">
        <input type="number" name="qty" value="{{ it.qty }}" min="0">
        <button type="submit">Update</button>
      </form>
    </td>
    <td>ETB {{ "%.2f"|format(it.line_total) }}</td>
    <td>
      <form method="post" action="{{ url_for('cart_update') }}">
        <input type="hidden" name="product_id" value="{{ it.id }}">
        <input type="hidden" name="qty" value="0">
        <button type="submit">Remove</button>
      </form>
    </td>
  </tr>
  {% endfor %}
  <tr>
    <th colspan="3" style="text-align:right">Total:</th>
    <th>ETB {{ "%.2f"|format(total) }}</th><th></th>
  </tr>
</table>
<p><a class="btn" href="{{ url_for('checkout_form') }}">Proceed to Checkout</a></p>
{% endif %}
{% endblock %}
